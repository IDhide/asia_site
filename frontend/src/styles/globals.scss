@use './mixins' as *;

// ========== CSS Custom Properties ==========
:root {
  // Colors
  --color-bg-primary: #000;
  --color-text-primary: #f2f2f2;
  --color-glass-bg: rgba(18, 18, 18, 0.52);
  --color-glass-border: rgba(255, 255, 255, 0.18);

  // Overlays
  --overlay-dark: linear-gradient(0deg, rgba(0, 0, 0, 0.62), rgba(0, 0, 0, 0.62));
  --overlay-page: linear-gradient(0deg, rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65));

  // Spacing (унифицированная система: xs, s, m, l, xl)
  --space-xs: clamp(0.2rem, 1vw, 1rem);
  --space-s: clamp(8px, 2vw, 24px);
  --space-m: clamp(24px, 5vw, 64px);
  --space-l: clamp(120px, 12vw, 160px);
  --space-xl: clamp(160px, 15vw, 200px);

  // Gaps (для flexbox/grid)
  --gap-xs: clamp(8px, 1.5vw, 12px);
  --gap-s: clamp(12px, 2vw, 16px);
  --gap-m: clamp(16px, 2.5vw, 24px);
  --gap-l: clamp(24px, 3.5vw, 36px);
  --gap-xl: clamp(32px, 5vw, 48px);

  // Page spacing (для layout страниц)
  --space-page-top: clamp(100px, 12vh, 140px);
  --space-page-bottom: clamp(60px, 8vh, 100px);
  --space-page-x: clamp(20px, 3vw, 40px);

  // Blur
  --bottom-blur-height: clamp(90px, 12svh, 140px);

  // Border Radius (унифицированная система: xs, s, m, l, xl, xxl, full)
  --radius-xs: clamp(3px, 0.5vw, 4px);
  --radius-s: clamp(6px, 1vw, 8px);
  --radius-m: clamp(10px, 1.5vw, 12px);
  --radius-l: clamp(21px, 3vw, 24px);
  --radius-xl: clamp(30px, 4.5vw, 36px);
  --radius-xxl: clamp(36px, 6vw, 48px);
  --radius-full: 9999px;

  // Transitions
  --transition-fast: 0.22s ease;
  --transition-normal: 0.3s ease;
  --transition-slow: 0.5s ease;

  // Z-index
  --z-header: 100;
  --z-modal: 1000;
  --z-dropdown: 50;
  --z-overlay: 999;

  // Container max-widths
  --container-xs: 480px;   // Мини-блоки, узкие формы
  --container-s: 640px;    // Карточки, небольшие блоки
  --container-m: 770px;    // Текстовый контент, формы
  --container-l: 1000px;   // Основной контент, сетки
  --container-xl: 1200px;  // Широкие галереи
  --container-xxl: 1600px; // Максимально широкий контент

  // Typography
  --font-family-base: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  --font-size-base: clamp(14px, 1.05vw, 16px);
  --font-size-xs: clamp(12px, 2vw, 16px);
  --font-size-s: clamp(13px, 2vw, 15px);
  --font-size-m: clamp(15px, 2vw, 17px);
  --font-size-l: clamp(16px, 2.5vw, 20px);
  --font-size-xl: clamp(16px, 2.5vw, 24px);
  --font-size-xxl: clamp(18px, 3vw, 32px);
  --line-height-base: 1.5;
  
  // Padding (для форм и кнопок)
  --padding-input-y: clamp(10px, 2vw, 14px);
  --padding-input-x: clamp(16px, 3vw, 20px);
  --padding-input-x-sm: clamp(12px, 2.5vw, 16px);
  --padding-button-y: clamp(16px, 3vw, 20px);
  --padding-button-x: clamp(36px, 6vw, 48px);
  --padding-container: clamp(32px, 6vw, 48px);
}

// ========== CSS Reset ==========
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  height: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  height: 100%;
  margin: 0;
  color: var(--color-text-primary);
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  background: var(--color-bg-primary);
  overflow: hidden; // Нет скролла на главной странице
}

// ========== Typography ==========
h1, h2, h3, h4, h5, h6 {
  font-weight: 700;
  line-height: 1.2;
}

p {
  margin-bottom: 1em;

  &:last-child {
    margin-bottom: 0;
  }
}

a {
  color: inherit;
  text-decoration: none;
  transition: opacity var(--transition-fast);

  &:hover {
    opacity: 0.8;
  }
}

// ========== Images ==========
img {
  display: block;
  max-width: 100%;
  height: auto;
}

// ========== Buttons ==========
button {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;

  &:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }
}

// ========== Lists ==========
ul, ol {
  list-style: none;
}

// ========== Forms ==========
input,
textarea,
select {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;
}

// ========== Utility Classes ==========
.visually-hidden {
  @include visually-hidden;
}

.truncate {
  @include truncate;
}

// ========== Main Content ==========
.main-content {
  min-height: 100vh;
}

// ========== Container Utilities ==========
// Мини контейнер (для узких форм, модальных окон)
.container-xs {
  width: 100%;
  max-width: var(--container-xs);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

// Малый контейнер (для карточек, небольших блоков)
.container-s {
  width: 100%;
  max-width: var(--container-s);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

// Средний контейнер (для текста, форм)
.container-m {
  width: 100%;
  max-width: var(--container-m);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

// Большой контейнер (для карточек, контента)
.container-l {
  width: 100%;
  max-width: var(--container-l);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

// Очень большой контейнер (для галерей)
.container-xl {
  width: 100%;
  max-width: var(--container-xl);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

// Максимально широкий контейнер (для больших секций)
.container-xxl {
  width: 100%;
  max-width: var(--container-xxl);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

// Алиасы для обратной совместимости
.container-narrow {
  width: 100%;
  max-width: var(--container-m);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

.container-medium {
  width: 100%;
  max-width: var(--container-xl);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

.container-wide {
  width: 100%;
  max-width: var(--container-xxl);
  margin: 0 auto;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

// Полная ширина с паддингами
.container-full {
  width: 100%;
  padding: 0 clamp(20px, 3vw, 40px);
  display: flex;
  flex-direction: column;
  gap: var(--gap-m);
}

// Мобильные паддинги и gap
@media (max-width: 640px) {
  .container-xs,
  .container-s,
  .container-m,
  .container-l,
  .container-xl,
  .container-xxl,
  .container-narrow,
  .container-medium,
  .container-wide,
  .container-full {
    padding: 0 clamp(16px, 4vw, 24px);
    gap: var(--gap-s);
  }
}

// ========== Page-specific body classes ==========
body.page-scrollable {
  overflow: auto; // Разрешаем скролл на страницах с контентом
}

body.page-scrollable::after {
  content: '';
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--bottom-blur-height);
  pointer-events: none;
  z-index: 4;
  backdrop-filter: blur(14px) saturate(120%);
  -webkit-backdrop-filter: blur(14px) saturate(120%);
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.2) 45%,
    rgba(0, 0, 0, 0.6) 100%
  );
  mask-image: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 1) 58%,
    rgba(0, 0, 0, 1) 100%
  );
}

// ========== Accessibility ==========
// Focus visible styles
:focus-visible {
  outline: 2px solid rgba(255, 255, 255, 0.5);
  outline-offset: 2px;
}

// Reduce motion for users who prefer it
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// ========== Backdrop Filter Fallback ==========
@supports not (backdrop-filter: blur(14px)) {
  .glass-effect {
    background: rgba(18, 18, 18, 0.85) !important;
  }
}

// ========== Selection ==========
::selection {
  background: rgba(255, 255, 255, 0.2);
  color: var(--color-text-primary);
}

// ========== Scrollbar ==========
body {
  @include custom-scrollbar;
}

// Main content wrapper
.main-content {
  min-height: 100vh;
}

// ========== Swiper Styles ==========
@import 'swiper/css';
@import 'swiper/css/navigation';
@import 'swiper/css/pagination';
@import 'swiper/css/effect-coverflow';
