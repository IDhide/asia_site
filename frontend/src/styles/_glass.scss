@use './_effects.scss' as *;

// ========== Glass Effect Classes ==========

// Базовый класс для всех стеклянных эффектов
%glass-base {
  position: relative;
}

.glass-base {
  @extend %glass-base;
}

// ========== Псевдо-стекло (без backdrop-filter) ==========

.glass-fake {
  @extend %glass-base;
  --glass-color: var(--glass-color-medium);
  --glass-opacity: var(--glass-bg-opacity-normal);

  background-color: color-mix(in srgb, var(--glass-color) var(--glass-opacity), transparent);
  @include glass-shadows(var(--glass-reflex-light), var(--glass-reflex-dark));
  border: 1px solid color-mix(in srgb, var(--glass-highlight) calc(var(--glass-reflex-light) * 10%), transparent);
}

// Варианты по цвету
.glass-fake-light {
  --glass-color: var(--glass-color-light);
}

.glass-fake-medium {
  --glass-color: var(--glass-color-medium);
}

.glass-fake-dark {
  --glass-color: var(--glass-color-dark);
}

// ========== Реальное стекло (с backdrop-filter) ==========

.glass-real {
  @extend %glass-base;
  --glass-color: var(--glass-color-medium);
  --glass-opacity: var(--glass-bg-opacity-normal);
  --glass-blur: var(--glass-blur-normal);

  background-color: color-mix(in srgb, var(--glass-color) var(--glass-opacity), transparent);
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-saturation));
  @include glass-shadows(var(--glass-reflex-light), var(--glass-reflex-dark));
  border: 1px solid color-mix(in srgb, var(--glass-highlight) calc(var(--glass-reflex-light) * 10%), transparent);
}

// Варианты по цвету
.glass-real-light {
  --glass-color: var(--glass-color-light);
}

.glass-real-medium {
  --glass-color: var(--glass-color-medium);
}

.glass-real-dark {
  --glass-color: var(--glass-color-dark);
}

// ========== Модификаторы интенсивности ==========

.glass-subtle {
  --glass-opacity: var(--glass-bg-opacity-subtle);
  --glass-blur: var(--glass-blur-subtle);
  --glass-reflex-light: 0.2;
  --glass-reflex-dark: 1.5;
}

.glass-normal {
  --glass-opacity: var(--glass-bg-opacity-normal);
  --glass-blur: var(--glass-blur-normal);
  --glass-reflex-light: 0.3;
  --glass-reflex-dark: 2;
}

.glass-strong {
  --glass-opacity: var(--glass-bg-opacity-strong);
  --glass-blur: var(--glass-blur-strong);
  --glass-reflex-light: 0.4;
  --glass-reflex-dark: 2.5;
}

// ========== Модификаторы интерактивности ==========

// Плавные переходы
.glass-animated {
  transition: background-color 400ms cubic-bezier(1, 0, 0.4, 1),
              box-shadow 400ms cubic-bezier(1, 0, 0.4, 1),
              transform 200ms cubic-bezier(1, 0, 0.4, 1);
}

// Hover эффект
.glass-hoverable:hover {
  --glass-opacity: calc(var(--glass-bg-opacity-normal) * 1.5);
  @include glass-shadows(calc(var(--glass-reflex-light) * 1.2), calc(var(--glass-reflex-dark) * 1.1));
}

.glass-hoverable.glass-subtle:hover {
  --glass-opacity: calc(var(--glass-bg-opacity-subtle) * 1.5);
}

.glass-hoverable.glass-strong:hover {
  --glass-opacity: calc(var(--glass-bg-opacity-strong) * 1.2);
}

// Active эффект
.glass-pressable:active {
  --glass-opacity: calc(var(--glass-bg-opacity-normal) * 1.8);
  transform: scale(0.98);
  @include glass-shadows(calc(var(--glass-reflex-light) * 0.9), calc(var(--glass-reflex-dark) * 1.3));
  transition: background-color 100ms cubic-bezier(1, 0, 0.4, 1),
              box-shadow 100ms cubic-bezier(1, 0, 0.4, 1),
              transform 100ms cubic-bezier(1, 0, 0.4, 1);
}

// Focus состояние
.glass-focusable:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--glass-highlight) 40%, transparent);
  outline-offset: 2px;
}

// Disabled состояние
.glass-disabled,
.glass-fake:disabled,
.glass-real:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  pointer-events: none;
}

// Комбинированный класс для полностью интерактивных элементов
.glass-interactive {
  cursor: pointer;
  transition: background-color 400ms cubic-bezier(1, 0, 0.4, 1),
              box-shadow 400ms cubic-bezier(1, 0, 0.4, 1),
              transform 200ms cubic-bezier(1, 0, 0.4, 1);

  &:hover {
    --glass-opacity: calc(var(--glass-bg-opacity-normal) * 1.5);
    @include glass-shadows(calc(var(--glass-reflex-light) * 1.2), calc(var(--glass-reflex-dark) * 1.1));
  }

  &.glass-subtle:hover {
    --glass-opacity: calc(var(--glass-bg-opacity-subtle) * 1.5);
  }

  &.glass-strong:hover {
    --glass-opacity: calc(var(--glass-bg-opacity-strong) * 1.2);
  }

  &:active {
    --glass-opacity: calc(var(--glass-bg-opacity-normal) * 1.8);
    transform: scale(0.98);
    @include glass-shadows(calc(var(--glass-reflex-light) * 0.9), calc(var(--glass-reflex-dark) * 1.3));
    transition: background-color 100ms cubic-bezier(1, 0, 0.4, 1),
                box-shadow 100ms cubic-bezier(1, 0, 0.4, 1),
                transform 100ms cubic-bezier(1, 0, 0.4, 1);
  }

  &:focus-visible {
    outline: 2px solid color-mix(in srgb, var(--glass-highlight) 40%, transparent);
    outline-offset: 2px;
  }
}
