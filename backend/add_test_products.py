#!/usr/bin/env python
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
–ó–∞–ø—É—Å–∫: python add_test_products.py

–°–æ–∑–¥–∞–µ—Ç 10 —Ç–æ–≤–∞—Ä–æ–≤ —Å –æ–±–ª–æ–∂–∫–∞–º–∏ –∏ –≥–∞–ª–µ—Ä–µ–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
"""
import os
import sys
import django
from pathlib import Path

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
django.setup()

from apps.shop.models import Product, ProductImage
from django.core.files import File

def add_test_products():
    """–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã"""

    # –ü—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
    image_path = Path('media/products/Rectangle_767.png')
    
    if not image_path.exists():
        print(f'‚ùå –û—à–∏–±–∫–∞: –§–∞–π–ª {image_path} –Ω–µ –Ω–∞–π–¥–µ–Ω!')
        print('–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–∫—Ä–∏–ø—Ç–∞.')
        return

    products_data = [
        {
            'title': '–§—É—Ç–±–æ–ª–∫–∞ –ê–°–ò–Ø Classic',
            'price': 2500,
            'short': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º',
            'description': '–£–¥–æ–±–Ω–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞ –∏–∑ 100% —Ö–ª–æ–ø–∫–∞ —Å —Ñ–∏—Ä–º–µ–Ω–Ω—ã–º –ª–æ–≥–æ—Ç–∏–ø–æ–º –ê–°–ò–Ø. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Å–∫–∏ –∏ –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤.',
        },
        {
            'title': '–•—É–¥–∏ –ê–°–ò–Ø Black Edition',
            'price': 4500,
            'short': '–ß–µ—Ä–Ω–æ–µ —Ö—É–¥–∏ –ø—Ä–µ–º–∏—É–º –∫–∞—á–µ—Å—Ç–≤–∞',
            'description': '–°—Ç–∏–ª—å–Ω–æ–µ —á–µ—Ä–Ω–æ–µ —Ö—É–¥–∏ —Å –∫–∞–ø—é—à–æ–Ω–æ–º –∏ –∫–∞—Ä–º–∞–Ω–æ–º-–∫–µ–Ω–≥—É—Ä—É. –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∏–∑ –ø–ª–æ—Ç–Ω–æ–≥–æ —Ç—Ä–∏–∫–æ—Ç–∞–∂–∞ –ø—Ä–µ–º–∏—É–º –∫–∞—á–µ—Å—Ç–≤–∞.',
        },
        {
            'title': '–ö–µ–ø–∫–∞ –ê–°–ò–Ø Signature',
            'price': 1800,
            'short': '–ë–µ–π—Å–±–æ–ª–∫–∞ —Å –≤—ã—à–∏—Ç—ã–º –ª–æ–≥–æ—Ç–∏–ø–æ–º',
            'description': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –±–µ–π—Å–±–æ–ª–∫–∞ —Å —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã–º —Ä–µ–º–µ—à–∫–æ–º –∏ –≤—ã—à–∏—Ç—ã–º –ª–æ–≥–æ—Ç–∏–ø–æ–º –ê–°–ò–Ø. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä.',
        },
        {
            'title': '–°–≤–∏—Ç—à–æ—Ç –ê–°–ò–Ø Tour 2024',
            'price': 3800,
            'short': '–õ–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–≤–∏—Ç—à–æ—Ç —Ç—É—Ä–Ω–µ',
            'description': '–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π —Å–≤–∏—Ç—à–æ—Ç —Å –ø—Ä–∏–Ω—Ç–æ–º —Ç—É—Ä–Ω–µ 2024. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ç–∏—Ä–∞–∂, –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç–∞—Ö –∏ –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º –º–∞–≥–∞–∑–∏–Ω–µ.',
        },
        {
            'title': '–®–æ–ø–µ—Ä –ê–°–ò–Ø Eco',
            'price': 1200,
            'short': '–≠–∫–æ–ª–æ–≥–∏—á–Ω–∞—è —Å—É–º–∫–∞-—à–æ–ø–µ—Ä',
            'description': '–ü—Ä–æ—á–Ω–∞—è —Å—É–º–∫–∞-—à–æ–ø–µ—Ä –∏–∑ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–≥–æ —Ö–ª–æ–ø–∫–∞. –ò–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è –ø–æ–∫—É–ø–æ–∫ –∏ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.',
        },
        {
            'title': '–ù–æ—Å–∫–∏ –ê–°–ò–Ø Pack',
            'price': 800,
            'short': '–ù–∞–±–æ—Ä –∏–∑ 3 –ø–∞—Ä –Ω–æ—Å–∫–æ–≤',
            'description': '–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ –Ω–æ—Å–∫–∏ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º –ê–°–ò–Ø. –í –Ω–∞–±–æ—Ä–µ 3 –ø–∞—Ä—ã —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤. –°–æ—Å—Ç–∞–≤: 80% —Ö–ª–æ–ø–æ–∫, 20% —ç–ª–∞—Å—Ç–∞–Ω.',
        },
        {
            'title': '–ü–æ—Å—Ç–µ—Ä –ê–°–ò–Ø Limited',
            'price': 1500,
            'short': '–õ–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç–µ—Ä –ê2',
            'description': '–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –ø–æ—Å—Ç–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ –ê2 —Å –∞–≤—Ç–æ–≥—Ä–∞—Ñ–æ–º. –ü–µ—á–∞—Ç—å –Ω–∞ –ø—Ä–µ–º–∏—É–º –±—É–º–∞–≥–µ. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ç–∏—Ä–∞–∂ 500 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤.',
        },
        {
            'title': '–ó–Ω–∞—á–∫–∏ –ê–°–ò–Ø Set',
            'price': 600,
            'short': '–ù–∞–±–æ—Ä –∏–∑ 5 –∑–Ω–∞—á–∫–æ–≤',
            'description': '–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∑–Ω–∞—á–∫–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –¥–∏–∑–∞–π–Ω–∞–º–∏. –î–∏–∞–º–µ—Ç—Ä 37–º–º. –ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∞—è –æ—Å–Ω–æ–≤–∞ —Å –±—É–ª–∞–≤–∫–æ–π.',
        },
        {
            'title': '–õ–æ–Ω–≥—Å–ª–∏–≤ –ê–°–ò–Ø White',
            'price': 3200,
            'short': '–ë–µ–ª—ã–π –ª–æ–Ω–≥—Å–ª–∏–≤ —Å –ø—Ä–∏–Ω—Ç–æ–º',
            'description': '–°—Ç–∏–ª—å–Ω—ã–π –±–µ–ª—ã–π –ª–æ–Ω–≥—Å–ª–∏–≤ —Å –∫—Ä—É–ø–Ω—ã–º –ø—Ä–∏–Ω—Ç–æ–º –Ω–∞ —Å–ø–∏–Ω–µ. –ü—Ä–∏—è—Ç–Ω–∞—è –∫ —Ç–µ–ª—É —Ç–∫–∞–Ω—å, –Ω–µ —Å–∞–¥–∏—Ç—Å—è –ø–æ—Å–ª–µ —Å—Ç–∏—Ä–∫–∏.',
        },
        {
            'title': '–†—é–∫–∑–∞–∫ –ê–°–ò–Ø Urban',
            'price': 5500,
            'short': '–ì–æ—Ä–æ–¥—Å–∫–æ–π —Ä—é–∫–∑–∞–∫ 20–ª',
            'description': '–í–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –≥–æ—Ä–æ–¥—Å–∫–æ–π —Ä—é–∫–∑–∞–∫ –æ–±—ä–µ–º–æ–º 20 –ª–∏—Ç—Ä–æ–≤. –û—Ç–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –Ω–æ—É—Ç–±—É–∫–∞ –¥–æ 15", –≤–æ–¥–æ–æ—Ç—Ç–∞–ª–∫–∏–≤–∞—é—â–∞—è —Ç–∫–∞–Ω—å.',
        },
    ]

    # –£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã
    Product.objects.all().delete()
    print('üóëÔ∏è  –£–¥–∞–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã')

    # –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ
    created_count = 0
    for product_data in products_data:
        # –°–æ–∑–¥–∞–µ–º —Ç–æ–≤–∞—Ä
        product = Product.objects.create(**product_data)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –æ–±–ª–æ–∂–∫—É
        with open(image_path, 'rb') as f:
            product.cover.save(f'cover_{product.id}.png', File(f), save=True)
        
        # –î–æ–±–∞–≤–ª—è–µ–º 10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≥–∞–ª–µ—Ä–µ—é
        for i in range(1, 11):
            with open(image_path, 'rb') as f:
                product_image = ProductImage.objects.create(
                    product=product,
                    alt=f'{product.title} - —Ñ–æ—Ç–æ {i}'
                )
                product_image.image.save(f'gallery_{product.id}_{i}.png', File(f), save=True)
        
        created_count += 1
        print(f'‚úÖ –°–æ–∑–¥–∞–Ω —Ç–æ–≤–∞—Ä: {product.title} (–æ–±–ª–æ–∂–∫–∞ + 10 —Ñ–æ—Ç–æ)')

    print(f'\nüéâ –í—Å–µ–≥–æ —Å–æ–∑–¥–∞–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: {created_count}')
    print(f'üì∏ –í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: {created_count * 11} (–æ–±–ª–æ–∂–∫–∏ + –≥–∞–ª–µ—Ä–µ–∏)')
    print('\n‚ú® –¢–æ–≤–∞—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã:')
    print('   - Frontend: http://localhost:3000/shop')
    print('   - Admin: http://localhost:8000/admin/shop/product/')

if __name__ == '__main__':
    add_test_products()
